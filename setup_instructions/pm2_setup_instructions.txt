本番サーバーでPM2をセットアップするための手順（初回のみ）

---

### 1. 現在のアプリケーションを停止
現在 `npm run dev` で動いているNode.jsプロセスを停止してください。
（ターミナルで `Ctrl + C` を押すか、関連するプロセスを終了します）

### 2. PM2をグローバルにインストール
以下のコマンドでPM2をサーバーにインストールします。
```bash
npm install pm2 -g
```

### 3. PM2でアプリケーションを起動
プロジェクトのルートディレクトリ（`/app/kanta_maruhashi`）に移動して、以下のコマンドを実行します。
`--name` オプションで、後から管理しやすいように `crm-app` という名前を付けています。

```bash
pm2 start src/node/index.js --name crm-app
```

### 4. （推奨）PM2の起動設定を保存
サーバーが再起動したときに自動でPM2がアプリを起動するように、以下のコマンドを実行します。

```bash
pm2 startup
```
上のコマンドを実行すると、環境に応じてもう一つ実行すべきコマンドが表示されます（例: `sudo env ...`）。そのコマンドをコピー＆ペーストして実行してください。

その後、現在のプロセスリストを保存します。
```bash
pm2 save
```

---

以上でサーバー側の準備は完了です。
この設定後、GitHub Actionsによるデプロイが正しく動作するようになります。
